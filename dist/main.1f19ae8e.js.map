{"version":3,"sources":["src/javascript/contextmenu.js","src/javascript/contentview.js","src/javascript/item.js","main.js"],"names":["Contextmenu","constructor","target","selected","self","init","initMenu","render","createEvent","menu","name","fn","addFolder","addFile","e","showColorPicker","deleteItem","ul","document","createElement","classList","add","insertAdjacentHTML","reduce","acc","item","index","append","renderColorPicker","colors","cur","colorPicker","lastElementChild","addEventListener","handleMenuEvent","handleColor","dataset","addChild","hideFileContext","color","bg_color","border_color","setStyles","hideColorPicker","delete","openMenu","stopPropagation","preventDefault","showFileContext","pageX","pageY","x","y","type","childNodes","remove","style","cssText","left","Number","replace","getBoundingClientRect","width","top","height","Contentview","renderTextTag","renderCloseButton","renderModifyButton","renderCompleteButton","renderCancelButton","button","textContent","hideView","modifyButton","modifyView","completeButton","updateText","cancelButton","removeModifyView","text","openView","data","setText","innerHTML","content","textarea","focus","value","toggleButton","toggle","Item","_id","root","view","author","parent","childs","canvas","rootItem","node","setChilds","setPosition","tag","firstElementChild","borderColor","backgroundColor","thisPosition","startX","endX","length","map","v","handleName","push","drawingLine","evFocusNameTag","forEach","filter","updatePosition","toObject","rootRect","rootClass","ctx","getContext","beginPath","dfs","moveTo","lineTo","stroke","getRootClass","itemTarget","getElementById","searchInput","contentview","saveButton","shareButton","titleInput","contextMenu","contentView","querySelector","treeId","location","pathname","slice","rootNode","result","fetch","json","cache","getData","setData","JSON","parse","title","handlePopup","closest","querySelectorAll","searchItem","list","includes","window","saveData","shareData","localStorage","getItem","defaultData","status","setItem","stringify","method","body","headers","id","alert","href","origin"],"mappings":";;AGAA;;AACA;;AACA;AFFe,ADAA,AEAA,MDAMiE,ADAAjE,AEAA2F,IAAN,CAAW,MDAX,ADAA,CCAkB,ADAA;ACC/B1F,ADAAA,AEAAA,EDAAA,ADAAA,AEAAA,WDAW,ADAA,AEAA,CDACC,ADAAA,AEAA,MDAD,ADAA,ECAS,ADAA;ACClB,ADAA,AEDW0F,IAAAA,GAAD,EDCL1F,ADAAA,MCAL,ADAA,GCAcA,ADAAA,MCAd,ADAA;AGEJ,AFDI,ADAA,AEFgBO,IAAAA,ECGd0H,EDHQ,CDEL9H,ADAAF,ICAL,GECY,CHDZ,EGCee,CHDC,IAAhB,GGCuB,CAACkH,cAAT,CAAwB,YAAxB,CAAnB;AACA,AFDG,ADAC,AEHsBvC,IAAAA,ECIpBwC,EDJQ,CFGLjI,IAAL,GAAY,CGCC,GAAGc,AHDhB,QGCwB,CAACkH,cAAT,CAAwB,aAAxB,CAApB;AACA,AHDI,AEJ4BlI,IAAAA,ECK1BoI,GHDGjI,CEJK,GFIV,IGCa,GAAGa,QAAQ,CAACkH,cAAT,CAAwB,aAAxB,CAApB;AACA,AFFE/H,ADCC,AELqCyF,EDItCzF,ECJsCyF,ECMlCyC,AFFA,ECJQ,CDIL,OEEO,GAAGrH,QAAQ,CAACkH,cAAT,CAAwB,YAAxB,CAAnB;AACA,AFFI,ACL0CrC,IAAAA,ECOxCyC,GFFGjI,CCLK,KDKV,EEEa,GAAGW,QAAQ,CAACkH,cAAT,CAAwB,aAAxB,CAApB;AACA,AFFG,ADAD/H,AENoD2F,EFMpD3F,EENoD2F,ECQhDyC,AHFA,GAAG,CENmD,GAAG,GCQ/C,CDRF,ECQKvH,QAAQ,CAACkH,cAAT,CAAwB,YAAxB,CAAnB;AHDI,AEPiE/E,IAAAA,IAAvD,CFOL/C,QAAL;AGGJ,AFHEC,ADCE,AERuEG,EDOzEH,ECPyEG,ECUrEL,EFHE,ACPM,CFQLE,CGEC,CFHC,EEGE,EHFT,UGEqB;AACvB,AFHE,ADCA,AET6E8E,IAAAA,ICWzEqD,CFHCxE,ADCA1D,EET+E,GAAG,EAA7E,GCWK,CHFf,EGEkB,AFHlB,IEGsBR,oBAAJ,CAAgBmI,UAAhB,CAApB;AACA,AFHE,ADCD,AEV4FlC,IAAAA,ICYvF0C,CFHCxE,CCT4F,GAAG,EAA1F,ICYK,GAAG,IAAIF,AFHtB,oBEGkB,CAAgBqE,WAAhB,CAApB;AACA,AFHE,ACVwG5G,IAAAA,ICapGwE,CFHC9B,ACVK,KCaA,GAAGlD,QAAQ,CAAC0H,CFHtB,YEGa,CAAuB,SAAvB,CAAf;AAEA,AFJE,ADAFtI,AEXiHiC,EFWjHjC,EEXiHiC,ICe3GsG,CFJCxE,ACX+G,CFW9G,EEXiH,CFW9G,CGIC,GAAGyE,CDfH,OCeW,CAACC,GFJtB,KEIa,CAAkBC,KAAlB,CAAwB,CAAxB,CAAf;AACA,AFJE,ADAA,AEZ+HvG,IAAAA,ECgB7HhB,GFJG6C,ADAA7D,CGIC,GAAG,AHJT,GAAY,AEZ+H,CCgB7I,AHHI,EEb4I,MAApI,EDYV;AEKF,AFJC,ADAKC,AEbkJ8B,IAAAA,ECiBpJyG,AHJEvI,IAAI,EAAG,AEbmJ,ECiBpJ,CDjBuJ,ECiBpJ,EHJX,EGIJ,ADjBY;AFaUC,AEbqJuF,IAAAA,EFarJvF,EAAE,EAAG,AEbf,MFaqB,KAAKC,SAAL;AGKjC,AFJAuD,ADDI,AEb+KgC,EDcnLhC,ECdmLgC,CFYrK,CGMX0C,CHJC,KGIK,CAAC/B,MAAP,AFJc,GEIE,AFJC,CEIpB,EAAsB;AACpB,AFJA,ADDIpG,AEdM,GAAD,EAAmL,CFcxLA,IGKEwI,AFJA3E,ADDE,EAAG,IGKC,AFJA,GEIG,AFJArD,ADDb,MGKmBiI,EFJE,CAAChI,EEIE,WFJX,CAAuB,QAAvB,CEIyB0H,AFJxC,MEI0B,EAA1B;AACAI,AFJA1E,ADFoB5D,AEbpB,ICmBAsI,AFJA1E,EDFoB5D,EAAE,CEbjBiF,CDeC,ADFmB,CCElBxE,CEIC,ADnBR,GCmBW,ADnBAwE,CFaoB,EEb/B,EDeA,CEIiBsD,AFJA7H,ADFmBR,GCEpC,CAAqB,EEIE,CAACuI,AHNO,IGMd,EAAjB,MFJA;AEKD,AFJC7E,ADHE,AEZF,GCgBF,CFDEA,CDLY,EAGV,EGMG,ADnBA9D,CDeC,CAAC+D,ECfP,GAAY/D,IAAZ,EDeA,GAAqB,GAArB;AEKA,AFJA,ADHIC,AEZJ,MFYIA,EGOA2I,CFJCnJ,ACfA2F,CFYG,EAAG,CGOF,ADnBT,EDeA,CEIYyD,AFJA3H,ACfAkE,IAAZ,CFYE,CCGF,CEImB,AFJAtB,EEInB,IFJA;AEKA,AFJAA,ADJsB5D,AEXtB,IDeA4D,EDJsB5D,EGQnB,AHRqB,CGQpB0I,ADnBCnJ,CDeC,ADJqBY,CCIpBmB,ADJqB,GGQ5B,CHRgC,AEXhC,CCmBWoH,EDnBGnJ,EFWuBa,CGQrB,GAAGwI,ADnBnB,GDeA,CAAwB,GEIE,EAAf,EFJX,ADJgC,CAAqBzI,CCIpB,ADJD,MCIO,KAAK2D,QAAL,EAAvC;AEKAwE,AFJD,ADLG,AEVF,ICmBAA,CHZY,EAIV,EEXGlD,GCmBG,GAAGyD,ADnBX,GAAczD,CCmBC,CAAC0D,IDnBhB,CCmBW,CAAWJ,KAAX,CAAX;AACD,AHTK3I,AEVJ,MFUIA,GEVCwF,CFUG,EAAG,GEVX,GAAcA,GFUZ,GEVF;ADeF9B,ADLwBzD,AETtB,EDcFyD,IDLwBzD,EAAE,CETnB0C,CFSsBvC,CAAC,EET5B,EFSgC,CETpBuC,IDcI,ADLqBtC,AETrC,GDcmB,YDLa,CAAqBD,CAArB;AGUlCmI,AFJE,ADNE,AERF,ECkBFA,GHdc,EAKV,EETGvI,CCkBC,AFJA6D,CEICsB,EDlBP,ECkBF,CFJc,ACdAnF,ECkBEyH,CFJCjH,CCdf,ODcuB,CEIzB,AFJ0BC,aAAT,CAAuB,QAAvB,CAAf;AEKF8H,AFJE1E,ADNI7D,AERJ,ECkBFuI,EFJE1E,EDNI7D,GERC2E,CCkBC,AFJA,ADNE,CGUDnF,AFJAkB,CDNI,IERX,CCkBF,EDlBiBiE,CCkBC8C,AFJhB,CAAiB9G,CDNf,ECMF,CAAqB,CCdrB,ICkBF,WFJE;AEKF4H,AFJE1E,ADPuB5D,AEPvB,ECkBFsI,EFJE1E,EDPuB5D,EAAE,CEPpBsF,CCkBC,AFJA,ADPsBnF,CGWrBL,AFJA+D,ADPsB,IGW/B,AHXmC,AEPjC,GCkBckE,ADlBAzC,EFOwBlF,ECOtC,ECdA,CDcqB,IEIvB,EFJE,IDPiC,CAAqBD,CAArB;AGYnCmI,AFJE,ADRE,AENF,ECkBFA,GHjBc,EAMV,ECOG/I,ACdAwB,CCkBC,CAACoE,GDlBP,CCkBF,AFJE,CAAYnE,CCdCD,CCkBCiH,IFJd,ACdA,CDcmBpE,MEIrB,AFJE;AEKF0E,AFJE,ADRIvI,AENJ,ECkBFuI,IHZMvI,GCQCgE,ACdAnC,CCkBC,AHZE,CGYD2D,CHZI,EENX,EFME,CGYJ,ADlBe3D,GCkBG2D,CFJhB,CCdA,EDcoB3B,EEItB,IFJE;AEKF0E,AFJE1E,ADTiB5D,AELjB,ECkBFsI,EFJE1E,EDTiB5D,EAAE,CELd8B,CCkBC,AFJA,ADTgB,CGaf0D,AFJAlE,KDTqB,GGa9B,EHbmCjB,AELjC,CCkBkBiI,EDlBExG,GDcpB,CAAwB,EEI1B,CHb8B,ICS5B,CCdA,CDciC,MAAM,KAAKkC,UAAL,EAAvC;AACD,ADVG,AEJF,KFFY,CAAZ,GEEKnC,QAAL,GAAgBA,QAAhB;ACkBF,AHZC,AELC,MCiBCyG,GDjBIjD,KCiBI,CAAC0D,ADjBV,GAAc1D,ECiBhB,EAAmB,EDjBjB;ACkBAyC,AFJFpE,ACbE,EDaFA,EEIEoE,KDjBK3C,IAAL,CCiBU,CAACN,CDjBCM,ICiBZ,ADjBA,EDakB,CEICmD,EFJE,MEIM,CAACS,KAA5B;AACD,AFJC,ADTFnJ,AEJE,EFIFA,MAAM,CEJC4F,CDaCvB,CDTC,MEJP,GAAgBuB,IDaI,GAAGjF,CCbvB,ODa+B,CAACC,aAAT,CAAuB,QAAvB,CAAvB;AACAyD,ADTA,AEJA,IDaAA,KCbKvE,CFICY,EAAE,CEJR,EFIWC,GCSG,CAACE,IDTI,CAACD,ICSpB,CAAyBE,GAAzB,CAA6B,IDTlB,CAAuB,IAAvB,CAAX,MCSA;AEIFI,AFHEmD,ADTA3D,AEJD,ECgBDQ,EFHEmD,ADTA3D,EGYE,AHZA,CAACG,EGYE,IAAIuE,GHZT,CAAatE,CCSC,CAACD,CDTf,CAAiB,KGYZ,CAAS6H,CFHd,CAAyB5H,GAAzB,CAA6B,CDT7B,CGYK,CAAP,AHZkC,KCShC,EDTA,EAAyC,QAAzC;AGaFI,AFHEmD,ADTA3D,EGYFQ,EFHEmD,ADTA3D,EGYE,AHZA,CGYCkG,AHZA7F,WGYL,AFHgB,CAACkD,MDTf,CAAsB,ICStB,GAA6B,IAA7B,ADTA,EAAmC,KAAK/D,IAAL,CAAUc,MAAV,CAAiB,CAACC,GAAD,EAAMC,IAAN,EAAYC,KAAZ,KAAsBF,GAAG,+BAAuBE,KAAvB,gBAAiCD,IAAI,CAACf,IAAtC,UAA1C,EAA6F,EAA7F,CAAnC;ACUA,ADTA,AELFL,EAAAA,IAAI,GDcGH,ADTAA,AELA,MDcL,ADTA,CCSYyB,ADTAA,MCSZ,ADTA,CCSmBiD,ADTA3D,EAAnB,YCSA;AEGF,AFFE,ADTA,AELA,QCgBI0I,CFFC/E,ADTAxE,AELAgG,IFKL,AELA,GFKYnF,AELAC,EFKZ,CGWe,GAAGhB,CFFlB,CCdoB,CAACiB,CDcCyD,EEEE,IAAI,MDhBhB,CAAuB,CDcnC,ICdY,CAAZ;ACiBA,AFFAA,ADTA,AELA,IDcAA,IEEG,CAAC1E,AHXC0B,AELArB,MCgBK,ADhBV,CCgBWqJ,EFFG,CAAC3H,IEEX,CAAe,EHXnB,MGWI,CAAJ,EAA8B,AFF9B,CAAgC,OAAhC,EAAyC,MAAM,KAAK4C,UAAL,EAA/C;AEGE3D,AFFH,ADTA,AELC,MCgBEA,GDhBGwB,KCgBK,CAACmH,GDhBX,aCgBE,CAA0B,QAA1B,EAAoCxC,OAApC,CAA4CL,CAAC,IAAIA,CAAC,CAAC5F,SAAF,CAAYC,GAAZ,CAAgB,QAAhB,CAAjD;AACD,ADhBD,SAAKgF,SAAL;ACiBD,AFHD/B,ADTA1C,AEJE,EDaF0C,ADTA1C,CGQA,MDZOpB,UFIU,CCSC,ACbhB,EFIkB,CCSC;AACnB,ADTA,AEJA,SAAK8F,CDaCxB,ADTAjD,MAAM,GAAG,CAAC,AEJhB,EDakB,GAAGX,EDTN,EAAU,ICSI,CAACC,CDTf,EAAkB,SAAlB,CCSM,CAAuB,ADTA,QCSvB,CAArB,IDTe,EAA4C,KAA5C,EAAmD,QAAnD,EAA6D,QAA7D,CAAf;AGaF,AFHE2D,ADTA,AEJD,IDaCA,IEGIgF,CHZC5J,MAAL,CCSY,ADTAoB,CCSCF,CEGC,GAAGlB,KFHjB,CEGuB,AFHAmB,GAAvB,CEG2B,AFHA,GDT3B,CAA+B,WAA/B,CCSA,CDREQ,MAAM,CAACN,MAAP,CACE,CAACC,GAAD,EAAMM,GAAN,KAAcN,GAAG,iDAAuCM,GAAvC,yCAAuEA,GAAvE,gBADnB,EAEE,mCAFF,IAGI,QAJN;AGaA,AFHAgD,ADJA,ICIAA,IEGG5E,CHPE6B,KGOI,CAACyD,CFHE,CAACpE,GEGV,AHPH,GAAmB,EGOC,CFHpB,CEGA,AFHuBC,CDJCnB,CGOA,CFHxB,CAA2B,GDJR,CAAY8B,ICI/B,YDJA;AGQA,AFHA8C,ADJD,AEVDvE,EAAAA,EDcEuE,ICdI,ECiBEiF,CDjBC,GCiBG,EFHE,CEGC7I,AFHAsD,QEGQ,CAACqF,EFHtB,GAA2B,IAA3B,OEGa,CAA0B,YAA1B,CAAb;AACAE,AFHA,ACdA,ICiBAA,IAAI,CAAC1C,AFHAnH,ACdAkG,IAAL,CAAUhF,CDcV,CEGA,AFHYO,CEGCqF,CAAC,IAAI,AFHlB,CAAmBlC,ACdnB,CAAoBzD,GAApB,CAAwB,MAAxB,CDcA,gBCdwC,KAAKgC,IAA7C;ACkBE,AFHF,ADLF7C,AETE,EFSFA,OCKOsE,ACdAsB,CCiBAY,CAAC,CAACxB,CHRE,AETT,CAAUlE,EFSE,CGQP,CAAQ0I,GFHb,GAAoBlF,EEGf,CAAiB5E,KDjBtB,CCiB4B,ADjBC,CCiBAsF,EFH7B,GEGK,CAAH,EAAmC,EDjBrC,+CAA6E,KAAK9E,IAAlF;ACkBIsG,AFHJlC,ADLA,AETA,IDcAA,IEGIkC,CAAC,AHRA5G,AETAgG,CCiBChF,GHRN,AETA,CFSUa,AETAX,EDcE,CAACW,EEGT,CAAYZ,GAAZ,CAAgB,MHRpB,CAA2B,CET3B,CDcA,ACd6B,CDcC,CEG1B,GHRJ,EAAoCP,CCKpC,ADLqC,ECKE,CCdvC,CFSyC,ICKI,CDLCoB,ICKI6C,WDLT,CAAqBjE,CAArB,CAAzC,ECK6C,EAA7C;AEIG,AFHJ,ADLC,AETA,OCeE,EHNGiB,AETA7B,ICiBI,EDjBT,CAAYyB,IFSZ,CAAiBM,CETjB,CAAmB,KAAKmE,IAAxB,KFSA,CAAkC,OAAlC,EAA2CtF,CAAC,IAAI,KAAKqB,WAAL,CAAiBrB,CAAjB,CAAhD;AGSIkG,AHRL,AETA,QCiBKA,CAAC,CAAC5F,SAAF,CAAYmC,MAAZ,CAAmB,WAAnB;AACD,AFJLW,EAAAA,aAAa,GAAG;AEKb,AFJD,ADLFhC,AETAQ,EFSAR,AETAQ,GCYE,KFEMsC,CCdC,GDcG,ACdA,GDcG9D,ADLA,CAACJ,CAAD,EAAI,ICKI,CAACK,aAAT,CAAuB,KAAvB,CAAb;AEKD,AFJC,ADLA,AETA,GCQF,MFMO6D,CDLCtD,AETA6E,GDcN,ACdS,EFSE,CCKCvB,ACdA,EFSElE,CAAC,CCKf,ADLgBZ,CETCkG,IAAL,CFSE,AETQI,CFSCpE,OAAT,CAAiBV,KAA/B,GETA;ADeA,ADLA,AETA6E,IAAAA,GAAG,CAAC/C,CDcCtD,ADLAO,IAAL,AETA,CFSUiB,AETAa,CDcV,CAAYZ,GDLZ,AETA,EFSiBhB,CCKjB,ACdkB,CDcCqE,ADLnB,CAAoBlE,CAApB,ECKA,ACduByB,KAAvB;ACkBF8F,AFHC,ADLA,AETC9B,ECiBF8B,EDjBE9B,GAAG,CAAC/C,KCiBK,ADjBT,CCiBUvB,ADjBAwE,WAAV,GAAwB,ECiB1B,CAA6B,EDjBEhE,KCiB/B,EAAsC,CAAC,IDjBrC;ACiBuCvC,ADhBvCqG,ICgBuCrG,ADhBvCqG,GAAG,CAAC/C,KAAJ,CAAUkD,eAAV,GAA4B,KAAKlE,QAAjC;ACgBqC,AFFvCyC,ADLArE,AERC,EDaDqE,ADLArE,CGOsC,KAAgBkJ,EFF9C,CAAC5E,ADLA,GAAG,CCKJ,EAAO,CEEiD,CAAChF,MAAD,CAAhE;AAEA+J,AFHE,ADLA,EGQFA,MAAM,CAAChI,AFHA9B,ADLAA,QCKL,ADLA,CAAckC,ECKE6C,IAAhB,CEGF,CAAwB,AHRtB,CAAuB,MGQzB,EAAiC,AHR/B,CGQgC;AAAEhF,AFFlC,ADLA,AETFoG,EAAAA,ECgBoCpG,KFF7BiF,ADLA7C,IETI,GDcT,ACdY,QFSZ;AGOgC,AFDhC,ADLD,AETC,GCe+B,KAAgBqH,CFD1CzJ,CCdCyG,KDcN,CAAYvF,GEC8C,CAAClB,EDfzC,GDclB,ACdqB,CCeqC,AFDpCmB,CECxB,EFDE,CAA0B,ACdA+E,IAAL,CAAUI,GDc/B,cCdqB,CAA4B3C,qBAA5B,EAArB;ACgBFoG,AFDC,ACdC,ECeFA,MAAM,CAAChI,ADfA2E,MAAL,GAAcD,OCehB,CAAwB,IDfI,CAACxD,CAA3B,OCeF,EAAuC,CAAC;AAAEjD,AHN1CW,AERE,EFQFA,EGM0CX,KHNnC,AERA2G,GFQG,CERR,GAAYF,YAAY,CAACxD,CAAb,GAAiBwD,YAAY,CAAC7C,KAA1C;ACcsC,AFAxCqB,ADLE,AERA,EDaFA,CEAuC,KAAgBwE,CFAhD,ADLAxJ,AERAiD,CAAL,EDaQ,CCbCuD,IFQT,CAActE,CGKkD,CAACnC,KDb5C,CCa2C,AHLhE,AERsBkD,CCaxB,AHLyB,AERd,GAAiBuD,GFQ1B,SERsC,CAAC3C,MAAb,GAAsB,CAAhD;ACcFuE,AFAE,ADLA,AERD,ECaDA,OFAOvD,ADLA1C,GGKG,CAACL,AFAT,CAAUmD,SAAV,CDLA,KGKF,CAA4B,OAA5B,EAAqC,CFAN,KEAY8E,AFAP/J,QEAe,AFApB,CEAqBsB,AFAPf,IEAM,AFAjD,CEAF,oBFA4D,KAAKP,QAAL,CAAckF,OAAd,CAAsBzB,OAAtB,CAA8B,OAA9B,EAAuC,MAAvC,CAA1D;AECF4E,AFAC,ADLA,EGKDA,WAAW,CAACvG,gBAAZ,CAA6B,OAA7B,EAAsC,MAAM;AAC1C,ADdFoE,EAAAA,SCcS5E,ADdA,GAAG,CCcC,CAACmE,GAAZ;AACAsE,AFDFzF,ADLAtC,AERE,EDaFsC,ADLAtC,EGME+H,IDdG,EDaG,EECE,CAACzI,AFDA,ADLA,AERDwE,CFQEnF,CAAD,EGMD,AHNK,CGMb,CDdG,CAAYgG,MAAZ,GAAqB,CAAxB,EAA2B;ACe3BqD,AFDA,ADLA,AERE,ICcFA,KFDKjK,CDLCqC,CERC0D,ECcE,CAACqD,CFDV,ADLW,CCKClI,CCbV,CFQYN,CAAC,CAACZ,AERA,CCcC,EAAR,CAAT,CFDA,ACbqB+F,CDaC1C,ADLR,CAASnB,IERP,CDahB,ACb4B2E,CDaC,CDLf,CAAiBxE,AERf,CAAgByE,CAAC,GFQjC,CCKA,ACbqC;ACetC,AFDA,ACbKA,GCUN,KDVMA,CAAC,CAAC9G,MAAF,GAAW,KAAKkG,IAAL,CAAUpE,gBAArB;ACeP,AHPG,AEPIgF,CCxCR,ODwCQA,CAAC,CAACnB,EFOC,EEPH,GFOQ9D,AEPC,KAAK8D,IAAd,EFOG,CAAiBzD,OAAjB,CAAyBV,KAAhC;ACMFiD,ADLI,AEPEqC,EDYNrC,MCZMqC,CAAC,CAAClB,CFOC,CCKC,EDLN,AEPE,CDYO,ECZE,KAAKA,IAAd;ACeR,AFFI,ADNY,AENRkB,MCcFsC,EDdEtC,CAAC,CDYC1B,ACZA7E,GCcG,AHRQN,CENb,ECcQ,CDdC,CDYC,GAAGe,ADNL,CGQMkJ,AHRQ7H,AENR9B,IAAd,CFMQ,ECMa,CAACU,ADNQoB,IGQJ,CAAC8H,AHRnB,OGQM,CAAqB,AFFtB,CAAuB,SEEtB,CAAtB,AFFqB,CAAjB;AACA,ADPyC,AELrCrD,QAAAA,CDYChC,ACZA,CAACkB,GDYN,CAAUlE,ECZN,GAAW,KAAKkE,MDYpB,ACZI,CDYuB9E,SAA3B,CAAqCC,GAArC,CAAyC,QAAzC;AEEJ,AFDI,ACZI2F,MCaFuC,EDbEvC,CDYC1B,ACZA,CAACU,GCaG,GAAG,ADbR,CDYJ,ECZe,CDYCV,EECE,CDbd,KDYJ;AEEF,AFDE,ADRE,AEJE0B,QCaAsD,ADbAtD,CDYC9G,ACZA,CAACiG,CFIC,GAAL,CCQF,CAAYxE,ECZR,CCaW,EDbE,CCaC,AFDlB,CAAmB2D,GCZGa,KDYtB,GCZI;ACcJP,AFDAN,ADTY,AEHR,ICaJM,AFDAN,GECG,EAAE,GFDG,CEAU,AFATC,ADTQpF,EEHN,GDYX,CCZewF,EFGH,CAAcnD,CEHf,CAASwE,CAAT,CAAP,IFGQ,GAAyBzE,KAAzB;AGWZc,AFDAiC,ADV4C,AEFzC,ICaHjC,AFDAiC,GCrBgB,CCsBZ,ADtBF,ECsBI,EFDE,CAACE,KEDS,AFClB,GAAiB,KAAKrF,QAAL,CAAckF,OAA/B;AEEAU,AFDA,ACZC,ICaDA,KFDKN,CECC,EAAE,GAHU,MFElB;AEEA/E,AFDD,ADXG,AEDH,ICaCA,IAAI,EAAE,CHZC,GAAL,GGQgB;AAKlBsF,AHbY,IGaZA,MAAM,EAAE,CHbS7F,GGQC,KHRN,CAAcsC,YAAd,GAA6BF,KAA7B;AGcZgI,AFFF1F,ADZkD,AEAlDrE,EDYAqE,ACZArE,ECcE+J,MAAM,EAAE,AFFA,CCZC,EDYE,CCZC;ACQM,AFKlB,ACZA,GCOF,MFKOpK,ACZAiG,IAAL,CAAUnE,GDYV,CAAcoD,OAAd,GAAwB,ECZxB,CAA2B,EDYEC,QAAL,CAAcE,ECZtC,EAA0C1E,CDYlB,ACZmB,CDYC8C,GCZG,IDYvB,CAA4B,ACZAnD,IAAL,CAAUoC,QAAV,CAAmB/B,CAAnB,EDYvB,ACZ6C,EDYE,ECZxB,CAA/C,GDYwB,CAAxB;AEGFsJ,AFFE,ADbE,AECF,ECcFA,OFFOjF,ACZAiB,IAAL,CCcU,ADdAI,CCcCgE,CFFX,MEEF,CAAqB,QDdnB,CAA4BvI,CCc9B,EAAiCuH,IAAI,CAACiB,QDdpC,CCc+B,ADdc,CCcCH,SDd9C,ECc+B,ADd0BxJ,CCc3D,ADd4D,IAAI,KAAKmG,UAAL,CAAgBnG,CAAhB,CAA9D;ACeF,AFFE,ADdW,AEEX,QAAG,CCcEsJ,AFFArF,ICZG1B,IAAL,ICcc,CAACgH,ADdD,GDYjB,GCZA,CCcK,CAAqB,ADbxB,KAAKjE,IAAL,CCaG,ADbOnE,CCad,eDbI,CAA2B,UAA3B,EAAuC,MAAM,KAAK6D,IAAL,CAAUb,QAAV,CAAmB,IAAnB,CAA7C;ACcL,AFFE,ADnBC,AEQD,CCEH;;AAYA,AFFEF,ADfG,AEIHkC,EDWAlC,ACXAkC,ICaIiD,MDbM,CAACpJ,CCaC,ADbF,EAAI,CCaCW,CFFC,GEEG,AFFA,IEEI;AACvB,AFFE,ADfA,AEIA,QCaIqG,ADbD,CDWExC,ADfAnF,EGiBE,EDbCO,CCaEe,GFFV,ADfA,AEIG,CCaW,AFFA8B,ADfAb,IGiBI,ADbD5B,CAAC,CDWlB,ACXmBZ,GFJnB,GEIiB,CAASsF,KAA1B,EAAiC;ACcjC,AFFA,ADfA,AEIE,QCaC,CAAC/D,AFFCuD,ADfArC,EEIEjC,ECaP,AFFA,CAAUsB,CEEA,ADbR,GAAYlB,CAAC,CAACZ,IFJhB,EEIc,CAASsF,GDWvB,CAA2BpE,CCXzB,QDWF,CAAqCmC,MAArC,CAA4C,QAA5C;AEGA,AFFA,ADfD,AEIE,SDWIkC,CEECyD,MAAM,GAAGzH,EFFf,EEEmB,CAAC+F,QAAL,EAAf;AACA0B,AFFD,ACXA,ICaCA,MAAM,CAACjD,MAAP,GAAgBxE,IAAI,CAACwE,MAAL,CAAYc,GAAZ,CAAgBC,CAAC,IAAIc,GAAG,CAACd,CAAD,CAAxB,CAAhB;AACA,AHlBFhG,EAAAA,SGkBSkI,CHlBC,GAAG,EGkBX;AACD,AFHDzD,ADfE,AEIFpD,EDWAoD,ACXApD,CCSA,MHbOlC,CEIC,CAACkD,GDWG,CCXJ,EDWO,ADfb,AEIa,CFJCT,MAAd;ACgBA,ADfA,AEIA,SDWK8B,ADfApC,CEIC4C,IAAI,GAAG,IDWb,CAAkB9D,EDflB,OCeA,CAA4BsE,MAA5B,CAAmC,QAAnC;AEGF,AFFE,ADfD,AEIGxF,MAAAA,ECaEgJ,CFFCpE,GCXG,ECaE,ADbC,GCaEgD,EDbG1B,CCaA,CAAC3E,AFFjB,CAAkBL,CCXP,CAAUY,CCaL,CAAlB,KFFE,CAA4B0D,MAA5B,CAAmC,CCZtB,ODYb;AEGFwD,AFFE,ACXEzI,ECaJyI,IDbIzI,ECaE,CAACiJ,AFFA9E,CCXC,EAAG,ECaX,GAAe6D,ADbChI,IAFD,EDab,CAAoBW,GEEG,CAACoE,KAA1B,AFFE,CAA8BE,MAA9B,CAAqC,QAArC;AEGF0E,AFFC,ADhBDvH,AEKIkD,ECaJqE,AHlBAvH,IEKIkD,IFLI,CAACjF,CAAD,AEKE,ECaE,AHlBAZ,AEKC,CCaAsK,IDbKzE,CFLV,EGkBR,AHlBoB,CGkBC,EDhBN,QCgBf,EAAiCyD,IAAI,CAACiB,SAAL,CAAevB,MAAf,CAAjC;AACD,AHlBG,AEKExI,CCGN,KDHMA,GFLGP,CEKC,EAAG,EAJI,GFDb,GAAgBD,MAAhB;ACxE6B,ADyE7BY,AEKEkF,IFLFlF,CAAC,CAACgC,AEKAkD,MAAM,EAAG,IALE,GFAb;AGkBJ,AHjBIlF,AEKEgF,IFLFhF,CAAC,CGiBCqJ,AHjBApH,AEKA+C,IAAI,EAAG,GCYE,EDZGA,CCYA,EHjBd,CEDa,GCkBOrE,IAAN,IAAc;AAC9B,AHjBE,AEKEyE,MAAAA,ECYEgD,CHjBClG,GEKG,ECYE,ADZC,GCYE,EDZGkD,ICYGiD,CHjBnB,CAAqBrI,AEFR,CFES,CAACmC,CGiBC,CAAC,GHjBJ,GAAU,EAA/B,EAAmCnC,CGiBX,AHjBY,CAACoC,CGiBC,IHjBH,GAAU,GAA7C;AGkBAwH,AHjBD,AEKG7E,ICYF6E,EDZE7E,ICYI,ADZA,ECYE,ADZC,KAAKA,CCWwB,GDnBzB;ACqBb8E,ADZExE,ICYFwE,EDZExE,ECYE,EAAE1E,IAFgC,ADV5B,EAAG,KAAK0E,QATL;ACsBbyE,AHlBF5H,AEMIK,EFNJL,EGkBE4H,EDZEvH,KCYK,EAAE,IHlBI,CAACF,CAAD,EAAIC,CAAJ,EAAO;AGkBT,AHjBX,AELa,KAAb,GFKG,KAAKjD,GGiBa,KHjBlB,CAAckD,IAAd,KAAuB,GGiBjB,GHjBT,EAAkC;AGiBO,AHhBvC,AEMF,UAAM5B,CFNCrB,GEMG,CFNR,CAAUkD,CEMC,IAAIqC,CCUwC,GDV5C,CFNX,AEMoBT,CFNC,CAArB,EAAwB9D,AEMb,CAAb,QFNE,CAAkCC,GAAlC,CAAsC,QAAtC;AGgBO,AHfP,AEMF,SAAK4E,EFNE7F,IAAL,AEMF,CFNYkD,AEMA4D,IAAZ,CAAiBzF,IAAjB,CFNE,CAAqB,CAArB,EAAwBL,SAAxB,CAAkCC,GAAlC,CAAsC,QAAtC;AGYoC,AHXrC,AEMD,GCKwB,CAA1B,CHdE,IESK8F,EFNE,SEMP;ACUF,AHfI,AEMF1F,IAAAA,ICSIoJ,ADTA,CAACzD,CCSC,CHfChH,EGeE,EHfP,CAAUkD,GGeG4F,IDTf,ECSqB,CAACE,AHfpB,CAAqB,CAArB,EGea,AHfWhI,EGe5B,OHfI,CAAkCmC,MAAlC,CAAyC,QAAzC;AGgBJuH,AHfI,AEMH,ECSDA,KAAK,CAAC,GHfG1K,IAAL,CAAUkD,UGeT,AHfD,CGeJ,AHfyB,CAArB,EAAwBlC,SAAxB,CAAkCmC,MAAlC,CAAyC,QAAzC;AGgBJuF,AHfG,EGeHA,QAAQ,CAACiC,IAAT,GAAgBjC,QAAQ,CAACkC,MAAT,GAAkB,GAAlB,GAAwBH,EAAxC;AACD,ADVCzD,CCCF,CDDEA,cAAc,GAAG;AFLf,AEMA,SFNKhH,AEMAgG,IFNL,AEMA,CFNU5C,AEMAgD,KFNV,CAAgB/C,OAAhB,IEMA,CAA4B8B,KAA5B,SFNmCpC,CAAnC,sBAAgDC,CAAhD;AGiBJ/C,AHhBI,AEMD,ICUC,KHhBKD,IAAL,CAAUgB,S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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["export default class Contextmenu {\r\n  constructor(target) {\r\n    this.target = target;\r\n    this.selected = null;\r\n    this.self = null;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.initMenu();\r\n    this.render();\r\n    this.createEvent();\r\n  }\r\n  initMenu() {\r\n    this.menu = [\r\n      { name : '폴더 생성', fn : () => this.addFolder() },\r\n      { name : '파일 생성', fn : () => this.addFile() },\r\n      { name : '글자 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '배경 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '테두리 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '삭제', fn : () => this.deleteItem() },\r\n    ];\r\n  }\r\n  render() {\r\n    const ul = document.createElement('ul');\r\n    ul.classList.add('contextmenu', 'popup', 'hidden');\r\n    ul.insertAdjacentHTML('beforeend', this.menu.reduce((acc, item, index) => acc += `<li data-index=\"${index}\">${item.name}</li>`, ''));\r\n    this.target.append(ul);\r\n    this.self = ul;\r\n    this.renderColorPicker();\r\n  }\r\n  renderColorPicker() {\r\n    const colors = ['black', 'gray', 'skyblue', 'forestgreen', 'red', 'violet', 'sienna'];\r\n    this.target.insertAdjacentHTML('beforeend', \r\n      colors.reduce(\r\n        (acc, cur) => acc += `<span class=\"color\" data-color=\"${cur}\" style=\"background-color:${cur}\";></span>`, \r\n        '<div class=\"color-picker hidden\">'\r\n      ) + '</div>'\r\n    );\r\n    this.colorPicker = this.target.lastElementChild;\r\n  }\r\n  createEvent() {\r\n    this.self.addEventListener('click', e => this.handleMenuEvent(e));\r\n    this.colorPicker.addEventListener('click', e => this.handleColor(e));\r\n  }\r\n  handleMenuEvent(e) {\r\n    const index = e.target.dataset.index;\r\n    this.menu[index].fn(e);\r\n  }\r\n  addFolder() {\r\n    this.selected.addChild('folder');\r\n    this.hideFileContext();\r\n  }\r\n  addFile() {\r\n    this.selected.addChild('file');\r\n    this.hideFileContext();\r\n  }\r\n  handleColor(e) {\r\n    const color = e.target.dataset.color;\r\n    switch(this.colorPicker.dataset.index) {\r\n      case '2': this.selected.color = color; break;\r\n      case '3': this.selected.bg_color = color; break;\r\n      case '4': this.selected.border_color = color; break;\r\n      default: break;\r\n    };\r\n    this.selected.setStyles();\r\n    this.hideColorPicker();\r\n  }\r\n  deleteItem() {\r\n    this.selected.delete();\r\n    this.hideFileContext();\r\n  }\r\n  openMenu(e, target) {\r\n    this.selected = target;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.showFileContext(e.pageX - 48, e.pageY - 120);\r\n  }\r\n  showFileContext(x, y) {\r\n    if(this.selected.type === 'file') {\r\n      this.self.childNodes[0].classList.add('hidden');\r\n      this.self.childNodes[1].classList.add('hidden');\r\n    } else {\r\n      this.self.childNodes[0].classList.remove('hidden');\r\n      this.self.childNodes[1].classList.remove('hidden');     \r\n    }\r\n    this.self.style.cssText = `left: ${x}px; top: ${y}px`;\r\n    this.self.classList.remove('hidden');\r\n  }\r\n  hideFileContext() {\r\n    this.self.classList.add('hidden');\r\n    this.colorPicker.classList.add('hidden');\r\n  }\r\n  showColorPicker(e) {\r\n    const left = Number(this.self.style.left.replace('px', '')) + Number(this.self.getBoundingClientRect().width);\r\n    const top = Number(this.self.style.top.replace('px', '')) + Number(this.self.childNodes[0].getBoundingClientRect().height * e.target.dataset.index);\r\n    this.colorPicker.dataset.index = e.target.dataset.index;\r\n    this.colorPicker.style.left = left + 'px';\r\n    this.colorPicker.style.top = top + 'px';\r\n    this.colorPicker.classList.remove('hidden');\r\n  }\r\n  hideColorPicker() {\r\n    this.colorPicker.classList.add('hidden');\r\n  }\r\n};","export default class Contentview {\r\n  constructor(target) {\r\n    this.target = target;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.render();\r\n  }\r\n  render() {\r\n    this.renderTextTag();\r\n    this.renderCloseButton();\r\n    this.renderModifyButton();\r\n    this.renderCompleteButton();\r\n    this.renderCancelButton();\r\n  }\r\n  renderCloseButton() {\r\n    const button = document.createElement('button');\r\n    button.classList.add('button__close');\r\n    button.textContent = 'X';\r\n    this.target.append(button);\r\n    button.addEventListener('click', () => this.hideView());\r\n  }\r\n  renderModifyButton() {\r\n    const button = document.createElement('button');\r\n    button.classList.add('button__modify');\r\n    button.textContent = '수정하기';\r\n    this.target.append(button);\r\n    this.modifyButton = button;\r\n    button.addEventListener('click', () => this.modifyView());\r\n  }\r\n  renderCompleteButton() {\r\n    const completeButton = document.createElement('button');\r\n    completeButton.classList.add('button__update');\r\n    completeButton.classList.add('hidden');\r\n    completeButton.textContent = '완료';\r\n    this.target.append(completeButton);\r\n    this.completeButton = completeButton;\r\n    completeButton.addEventListener('click', () => this.updateText());\r\n  }\r\n  renderCancelButton() {\r\n    const cancelButton = document.createElement('button');\r\n    cancelButton.classList.add('button__cancel');\r\n    cancelButton.classList.add('hidden');\r\n    cancelButton.textContent = '취소';\r\n    this.target.append(cancelButton);\r\n    this.cancelButton = cancelButton;\r\n    cancelButton.addEventListener('click', () => this.removeModifyView());\r\n  }\r\n  renderTextTag() {\r\n    const text = document.createElement('div');\r\n    this.text = text;\r\n    this.target.append(text);\r\n  }\r\n  openView(data) {\r\n    this.selected = data;\r\n    this.setText();\r\n    this.target.classList.add('active');\r\n  }\r\n  setText() {\r\n    this.text.innerHTML = `<h3>${this.selected.name}</h3><p>${this.selected.content.replace(/\\r\\n/g, '<br>')}</p>`;\r\n  }\r\n  hideView() {\r\n    this.target.classList.remove('active');\r\n  }\r\n  modifyView() {\r\n    const textarea = document.createElement('textarea');\r\n    this.text.lastElementChild.classList.add('hidden');\r\n    this.textarea = textarea;\r\n    this.target.append(textarea);\r\n    textarea.focus();\r\n    textarea.value = this.selected.content;\r\n    this.toggleButton();\r\n  }\r\n  updateText() {\r\n    this.selected.content = this.textarea.value.replace(/(?:\\r\\n|\\r|\\n)/g, '\\r\\n');\r\n    this.setText();\r\n    this.removeModifyView();\r\n  }\r\n  removeModifyView() {\r\n    this.textarea.remove();\r\n    this.text.lastElementChild.classList.remove('hidden');\r\n    this.toggleButton();\r\n  }\r\n  toggleButton() {\r\n    this.modifyButton.classList.toggle('hidden');\r\n    this.cancelButton.classList.toggle('hidden');\r\n    this.completeButton.classList.toggle('hidden');\r\n  }\r\n}\r\n\r\n","export default class Item {\r\n  constructor({_id, menu, root, target, view, author, parent = null, type, name, content = '', childs = [], index, color = '#000', border_color = '#000', bg_color = '#fff', canvas, rootItem}) {\r\n    this._id = _id;\r\n    this.menu = menu;\r\n    this.root = root;\r\n    this.target = target;\r\n    this.author = author;\r\n    this.canvas = canvas;\r\n    this.type = type;\r\n    this.name = name;\r\n    this.content = content;\r\n    this.childs = childs;\r\n    this.index = index;\r\n    this.color = color;\r\n    this.border_color = border_color;\r\n    this.bg_color = bg_color;\r\n    this.parent = parent;\r\n    this.view = view;\r\n    this.rootItem = rootItem;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.node = document.createElement('div');\r\n    this.render();\r\n    this.setStyles();\r\n    this.setChilds();\r\n    this.createEvent();\r\n    this.setPosition();\r\n  }\r\n  render() {\r\n    this.node.classList.add('item', `item-${this.type}`);\r\n    this.node.insertAdjacentHTML('beforeend', `<input class=\"item__tag\" value=\"${this.name}\">`);\r\n    this.node.insertAdjacentHTML('beforeend', `<div class=\"item__children\"></div>`);\r\n    this.target.append(this.node);\r\n  }\r\n  setStyles() {\r\n    const tag = this.node.firstElementChild;\r\n    tag.style.color = this.color;\r\n    tag.style.borderColor = this.border_color;\r\n    tag.style.backgroundColor = this.bg_color;\r\n  }\r\n  setPosition() {\r\n    const thisPosition = this.node.firstElementChild.getBoundingClientRect();\r\n    this.startX = thisPosition.x;\r\n    this.endX = thisPosition.x + thisPosition.width;\r\n    this.y = thisPosition.y - thisPosition.height / 2;\r\n  }\r\n  setChilds() {\r\n    if(this.childs.length > 0) {\r\n      this.childs = this.childs.map(v => {\r\n        v.target = this.node.lastElementChild;\r\n        v.root = this.root;\r\n        v.view = this.view;\r\n        v.menu = this.menu;\r\n        v.canvas = this.canvas;\r\n        v.parent = this;\r\n        v.rootItem = this.rootItem;\r\n        return new Item(v);\r\n      });\r\n    }\r\n  }\r\n  createEvent() {\r\n    this.node.addEventListener('contextmenu', e => this.menu.openMenu(e, this));\r\n    this.node.firstElementChild.addEventListener('focusout', e => this.handleName(e));\r\n    if(this.type === 'file')\r\n      this.node.addEventListener('dblclick', () => this.view.openView(this));\r\n  }\r\n  handleName(e) {\r\n    if(this.name !== e.target.value) {\r\n      this.name = e.target.value;\r\n    }\r\n  }\r\n  addChild(type) {\r\n    const data = {\r\n      target : this.node.lastElementChild,\r\n      menu : this.menu,\r\n      author : this.author,\r\n      name : '',\r\n      parent : this,\r\n      view : this.view,\r\n      canvas : this.canvas,\r\n      root : this.root,\r\n      rootItem : this.rootItem,\r\n      type\r\n    }\r\n    const item = new Item(data);\r\n    this.childs.push(item);\r\n    this.drawingLine();\r\n    item.evFocusNameTag();\r\n  }\r\n  evFocusNameTag() {\r\n    this.node.firstElementChild.focus();\r\n  }\r\n  delete() {\r\n    this.childs.forEach(v => {\r\n      v.delete();\r\n    });\r\n    if(this.parent) {\r\n      this.parent.childs = this.parent.childs.filter(v => v !== this);\r\n    }\r\n    this.node.remove();\r\n    this.updatePosition();\r\n    this.drawingLine();\r\n  }\r\n  toObject() {\r\n    return {\r\n      _id: this._id,\r\n      type: this.type,\r\n      author: this.author,\r\n      name : this.name,\r\n      border_color : this.border_color,\r\n      color : this.color,\r\n      bg_color : this.bg_color,\r\n      content : this.content,\r\n      startX : this.startX,\r\n      endX : this.endX,\r\n      y : this.y,\r\n    };\r\n  }\r\n  drawingLine() {\r\n    const rootRect = this.root.getBoundingClientRect();\r\n    const canvas = this.canvas;\r\n    canvas.width = rootRect.width;\r\n    canvas.height = rootRect.height;\r\n    const rootClass = this.updatePosition();\r\n    if(!rootClass) return;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.beginPath();\r\n    const dfs = item => {\r\n      if(!item) return;\r\n      const { endX, y } = item;\r\n      ctx.moveTo(endX - 48, y - 80);\r\n      item.childs.forEach(v => {\r\n        ctx.lineTo(v.startX - 48, v.y - 80);\r\n        ctx.moveTo(endX - 48, y - 80);\r\n      });\r\n      item.childs.forEach(v => {\r\n        dfs(v);\r\n      });\r\n    };\r\n    dfs(rootClass);\r\n    ctx.stroke();\r\n  }\r\n  updatePosition() {\r\n    if(!this.parent) return this;\r\n    const getRootClass = item => {\r\n      if(item.parent === null) return item;\r\n      return getRootClass(item.parent);\r\n    };\r\n    const dfs = item => {\r\n      if(!item) return;\r\n      item.setPosition();\r\n      item.childs.forEach(v => {\r\n        dfs(v);\r\n      });\r\n    };\r\n    const rootClass = getRootClass(this.parent);\r\n    if(!rootClass) return;\r\n    dfs(rootClass);\r\n    return rootClass;\r\n  }\r\n}","import Contextmenu from './src/javascript/contextmenu.js';\r\nimport Contentview from './src/javascript/contentview.js';\r\nimport Item from './src/javascript/item.js';\r\n\r\nconst itemTarget = document.getElementById('itemTarget');\r\nconst searchInput = document.getElementById('searchInput');\r\nconst contentview = document.getElementById('contentview');\r\nconst saveButton = document.getElementById('saveButton');\r\nconst shareButton = document.getElementById('shareButton');\r\nconst titleInput = document.getElementById('titleInput');\r\n\r\nconst init = async () => {\r\n  const contextMenu = new Contextmenu(itemTarget);\r\n  const contentView = new Contentview(contentview);\r\n  const canvas = document.querySelector('.canvas');\r\n\r\n  const treeId = location.pathname.slice(1);\r\n  let item = null;\r\n  let rootNode = null;\r\n  if(treeId.length > 0) {\r\n    const result = await fetch(`/memotree/${treeId}`);\r\n    rootNode = await result.json();\r\n  } else {\r\n    let cache = getData();\r\n    if(!cache) cache = setData();\r\n    rootNode = JSON.parse(cache);\r\n  }\r\n  rootNode.root = itemTarget;\r\n  rootNode.target = itemTarget;\r\n  rootNode.menu = contextMenu;\r\n  rootNode.view = contentView;\r\n  rootNode.canvas = canvas;\r\n  rootNode.rootItem = rootNode;\r\n  if(rootNode.title) {\r\n    titleInput.value = rootNode.title;\r\n  }\r\n  item = new Item(rootNode);\r\n  item.drawingLine();\r\n  const handlePopup = target => {\r\n    if(!target.closest('.popup')) {\r\n      document.querySelectorAll('.popup').forEach(v => v.classList.add('hidden'));\r\n    }\r\n  };\r\n\r\n  const searchItem = target => {\r\n    if(target.value === '') return;\r\n    const list = document.querySelectorAll('.item__tag');\r\n    list.forEach(v => {\r\n      if(v.value.includes(target.value)) {\r\n        v.classList.add('on-search');\r\n      } else {\r\n        v.classList.remove('on-search');\r\n      }\r\n    });\r\n  };\r\n  searchInput.addEventListener('keyup', ({ target }) => searchItem(target));\r\n\r\n  window.addEventListener('click', ({ target }) => handlePopup(target));\r\n  window.addEventListener('contextmenu', ({ target }) => handlePopup(target));\r\n  saveButton.addEventListener('click', () => saveData(item));\r\n  shareButton.addEventListener('click', () => {\r\n    delete item._id;\r\n    saveData(item);\r\n    shareData(getData());\r\n  });\r\n};\r\n\r\nconst getData = () => localStorage.getItem('memotree');\r\nconst setData = () => {\r\n  const defaultData = {\r\n    _id: null,\r\n    type: 'folder',\r\n    author: '*',\r\n    name: '제목 없음',\r\n    parent: null,\r\n    status: 1,\r\n  };\r\n  localStorage.setItem('memotree', JSON.stringify(defaultData));\r\n  return localStorage.getItem('memotree');\r\n};\r\nconst saveData = item => {\r\n  const dfs = item => {\r\n    if(!item) return;\r\n    const result = item.toObject();\r\n    result.childs = item.childs.map(v => dfs(v));\r\n    return result;\r\n  };\r\n  const result = dfs(item);\r\n  result.title = titleInput.value;\r\n  localStorage.setItem('memotree', JSON.stringify(result));\r\n}\r\nconst shareData = async item => {\r\n  const result = await fetch('/memotree', { \r\n    method: 'POST', \r\n    body: item, \r\n    headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' } \r\n  });\r\n  const id = await result.json();\r\n  alert('새로운 주소가 생성되었습니다!');\r\n  location.href = location.origin + '/' + id;\r\n}\r\n\r\ninit();"]}