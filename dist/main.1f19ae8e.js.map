{"version":3,"sources":["src/javascript/contextmenu.js","src/javascript/contentview.js","src/javascript/item.js","main.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Contextmenu","constructor","target","selected","self","init","initMenu","render","createEvent","menu","name","fn","addFolder","addFile","e","showColorPicker","deleteItem","ul","document","createElement","classList","add","insertAdjacentHTML","reduce","acc","item","index","append","renderColorPicker","colors","cur","colorPicker","lastElementChild","addEventListener","handleMenuEvent","handleColor","dataset","addChild","hideFileContext","color","bg_color","border_color","setStyles","delete","openMenu","stopPropagation","preventDefault","showFileContext","pageX","pageY","x","y","type","childNodes","remove","style","cssText","left","Number","replace","getBoundingClientRect","width","top","offsetTop","hideColorPicker","Contentview","renderTextTag","renderCloseButton","renderModifyButton","renderCompleteButton","renderCancelButton","button","textContent","hideView","modifyButton","modifyView","completeButton","updateText","cancelButton","removeModifyView","text","openView","data","setText","innerHTML","content","textarea","focus","value","toggleButton","toggle","Item","_id","root","view","author","parent","childs","canvas","rootItem","node","setChilds","setPosition","tag","firstElementChild","borderColor","backgroundColor","thisPosition","startX","endX","height","length","map","v","handleName","push","drawingLine","evFocusNameTag","forEach","filter","updatePosition","toObject","rootRect","rootClass","ctx","getContext","beginPath","dfs","moveTo","lineTo","stroke","getRootClass","itemTarget","getElementById","searchInput","contentview","saveButton","shareButton","titleInput","contextMenu","contentView","querySelector","treeId","location","pathname","slice","rootNode","result","fetch","json","cache","getData","setData","JSON","parse","title","handlePopup","closest","querySelectorAll","searchItem","list","includes","window","saveData","shareData","localStorage","getItem","defaultData","status","setItem","stringify","method","body","headers","id","alert","href","origin","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","appendChild","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","some","cb"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["export default class Contextmenu {\r\n  constructor(target) {\r\n    this.target = target;\r\n    this.selected = null;\r\n    this.self = null;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.initMenu();\r\n    this.render();\r\n    this.createEvent();\r\n  }\r\n  initMenu() {\r\n    this.menu = [\r\n      { name : '폴더 생성', fn : () => this.addFolder() },\r\n      { name : '파일 생성', fn : () => this.addFile() },\r\n      { name : '글자 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '배경 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '테두리 색상변경', fn : e => this.showColorPicker(e) },\r\n      { name : '삭제', fn : () => this.deleteItem() },\r\n    ];\r\n  }\r\n  render() {\r\n    const ul = document.createElement('ul');\r\n    ul.classList.add('contextmenu', 'popup', 'hidden');\r\n    ul.insertAdjacentHTML('beforeend', this.menu.reduce((acc, item, index) => acc += `<li data-index=\"${index}\">${item.name}</li>`, ''));\r\n    this.target.append(ul);\r\n    this.self = ul;\r\n    this.renderColorPicker();\r\n  }\r\n  renderColorPicker() {\r\n    const colors = ['black', 'gray', 'skyblue', 'forestgreen', 'red', 'violet', 'sienna'];\r\n    this.target.insertAdjacentHTML('beforeend', \r\n      colors.reduce(\r\n        (acc, cur) => acc += `<span class=\"color\" data-color=\"${cur}\" style=\"background-color:${cur}\";></span>`, \r\n        '<div class=\"color-picker popup hidden\">'\r\n      ) + '</div>'\r\n    );\r\n    this.colorPicker = this.target.lastElementChild;\r\n  }\r\n  createEvent() {\r\n    this.self.addEventListener('click', e => this.handleMenuEvent(e));\r\n    this.colorPicker.addEventListener('click', e => this.handleColor(e));\r\n  }\r\n  handleMenuEvent(e) {\r\n    const index = e.target.dataset.index;\r\n    this.menu[index].fn(e);\r\n  }\r\n  addFolder() {\r\n    this.selected.addChild('folder');\r\n    this.hideFileContext();\r\n  }\r\n  addFile() {\r\n    this.selected.addChild('file');\r\n    this.hideFileContext();\r\n  }\r\n  handleColor(e) {\r\n    const color = e.target.dataset.color;\r\n    switch(this.colorPicker.dataset.index) {\r\n      case '2': this.selected.color = color; break;\r\n      case '3': this.selected.bg_color = color; break;\r\n      case '4': this.selected.border_color = color; break;\r\n      default: break;\r\n    };\r\n    this.selected.setStyles();\r\n    this.hideFileContext();\r\n  }\r\n  deleteItem() {\r\n    this.selected.delete();\r\n    this.hideFileContext();\r\n  }\r\n  openMenu(e, target) {\r\n    this.selected = target;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.showFileContext(e.pageX - 48, e.pageY - 120);\r\n  }\r\n  showFileContext(x, y) {\r\n    if(this.selected.type === 'file') {\r\n      this.self.childNodes[0].classList.add('hidden');\r\n      this.self.childNodes[1].classList.add('hidden');\r\n    } else {\r\n      this.self.childNodes[0].classList.remove('hidden');\r\n      this.self.childNodes[1].classList.remove('hidden');     \r\n    }\r\n    this.self.style.cssText = `left: ${x}px; top: ${y}px`;\r\n    this.self.classList.remove('hidden');\r\n  }\r\n  hideFileContext() {\r\n    this.self.classList.add('hidden');\r\n    this.colorPicker.classList.add('hidden');\r\n  }\r\n  showColorPicker(e) {\r\n    const left = Number(this.self.style.left.replace('px', '')) + Number(this.self.getBoundingClientRect().width);\r\n    const top = Number(this.self.style.top.replace('px', '')) + Number(e.target.offsetTop);\r\n    this.colorPicker.dataset.index = e.target.dataset.index;\r\n    this.colorPicker.style.left = left + 'px';\r\n    this.colorPicker.style.top = top + 'px';\r\n    this.colorPicker.classList.remove('hidden');\r\n  }\r\n  hideColorPicker() {\r\n    this.colorPicker.classList.add('hidden');\r\n  }\r\n};","export default class Contentview {\r\n  constructor(target) {\r\n    this.target = target;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.render();\r\n  }\r\n  render() {\r\n    this.renderTextTag();\r\n    this.renderCloseButton();\r\n    this.renderModifyButton();\r\n    this.renderCompleteButton();\r\n    this.renderCancelButton();\r\n  }\r\n  renderCloseButton() {\r\n    const button = document.createElement('button');\r\n    button.classList.add('button__close');\r\n    button.textContent = 'X';\r\n    this.target.append(button);\r\n    button.addEventListener('click', () => this.hideView());\r\n  }\r\n  renderModifyButton() {\r\n    const button = document.createElement('button');\r\n    button.classList.add('button__modify');\r\n    button.textContent = '수정하기';\r\n    this.target.append(button);\r\n    this.modifyButton = button;\r\n    button.addEventListener('click', () => this.modifyView());\r\n  }\r\n  renderCompleteButton() {\r\n    const completeButton = document.createElement('button');\r\n    completeButton.classList.add('button__update');\r\n    completeButton.classList.add('hidden');\r\n    completeButton.textContent = '완료';\r\n    this.target.append(completeButton);\r\n    this.completeButton = completeButton;\r\n    completeButton.addEventListener('click', () => this.updateText());\r\n  }\r\n  renderCancelButton() {\r\n    const cancelButton = document.createElement('button');\r\n    cancelButton.classList.add('button__cancel');\r\n    cancelButton.classList.add('hidden');\r\n    cancelButton.textContent = '취소';\r\n    this.target.append(cancelButton);\r\n    this.cancelButton = cancelButton;\r\n    cancelButton.addEventListener('click', () => this.removeModifyView());\r\n  }\r\n  renderTextTag() {\r\n    const text = document.createElement('div');\r\n    this.text = text;\r\n    this.target.append(text);\r\n  }\r\n  openView(data) {\r\n    this.selected = data;\r\n    this.setText();\r\n    this.target.classList.add('active');\r\n  }\r\n  setText() {\r\n    this.text.innerHTML = `<h3>${this.selected.name}</h3><p>${this.selected.content.replace(/\\r\\n/g, '<br>')}</p>`;\r\n  }\r\n  hideView() {\r\n    this.target.classList.remove('active');\r\n  }\r\n  modifyView() {\r\n    const textarea = document.createElement('textarea');\r\n    this.text.lastElementChild.classList.add('hidden');\r\n    this.textarea = textarea;\r\n    this.target.append(textarea);\r\n    textarea.focus();\r\n    textarea.value = this.selected.content;\r\n    this.toggleButton();\r\n  }\r\n  updateText() {\r\n    this.selected.content = this.textarea.value.replace(/(?:\\r\\n|\\r|\\n)/g, '\\r\\n');\r\n    this.setText();\r\n    this.removeModifyView();\r\n  }\r\n  removeModifyView() {\r\n    this.textarea.remove();\r\n    this.text.lastElementChild.classList.remove('hidden');\r\n    this.toggleButton();\r\n  }\r\n  toggleButton() {\r\n    this.modifyButton.classList.toggle('hidden');\r\n    this.cancelButton.classList.toggle('hidden');\r\n    this.completeButton.classList.toggle('hidden');\r\n  }\r\n}\r\n\r\n","export default class Item {\r\n  constructor({_id, menu, root, target, view, author, parent = null, type, name, content = '', childs = [], index, color = '#000', border_color = '#000', bg_color = '#fff', canvas, rootItem}) {\r\n    this._id = _id;\r\n    this.menu = menu;\r\n    this.root = root;\r\n    this.target = target;\r\n    this.author = author;\r\n    this.canvas = canvas;\r\n    this.type = type;\r\n    this.name = name;\r\n    this.content = content;\r\n    this.childs = childs;\r\n    this.index = index;\r\n    this.color = color;\r\n    this.border_color = border_color;\r\n    this.bg_color = bg_color;\r\n    this.parent = parent;\r\n    this.view = view;\r\n    this.rootItem = rootItem;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.node = document.createElement('div');\r\n    this.render();\r\n    this.setStyles();\r\n    this.setChilds();\r\n    this.createEvent();\r\n    this.setPosition();\r\n  }\r\n  render() {\r\n    this.node.classList.add('item', `item-${this.type}`);\r\n    this.node.insertAdjacentHTML('beforeend', `<input class=\"item__tag\" value=\"${this.name}\">`);\r\n    this.node.insertAdjacentHTML('beforeend', `<div class=\"item__children\"></div>`);\r\n    this.target.append(this.node);\r\n  }\r\n  setStyles() {\r\n    const tag = this.node.firstElementChild;\r\n    tag.style.color = this.color;\r\n    tag.style.borderColor = this.border_color;\r\n    tag.style.backgroundColor = this.bg_color;\r\n  }\r\n  setPosition() {\r\n    const thisPosition = this.node.firstElementChild.getBoundingClientRect();\r\n    this.startX = thisPosition.x;\r\n    this.endX = thisPosition.x + thisPosition.width;\r\n    this.y = thisPosition.y - thisPosition.height / 2;\r\n  }\r\n  setChilds() {\r\n    if(this.childs.length > 0) {\r\n      this.childs = this.childs.map(v => {\r\n        v.target = this.node.lastElementChild;\r\n        v.root = this.root;\r\n        v.view = this.view;\r\n        v.menu = this.menu;\r\n        v.canvas = this.canvas;\r\n        v.parent = this;\r\n        v.rootItem = this.rootItem;\r\n        return new Item(v);\r\n      });\r\n    }\r\n  }\r\n  createEvent() {\r\n    this.node.addEventListener('contextmenu', e => this.menu.openMenu(e, this));\r\n    this.node.firstElementChild.addEventListener('focusout', e => this.handleName(e));\r\n    if(this.type === 'file')\r\n      this.node.addEventListener('dblclick', () => this.view.openView(this));\r\n  }\r\n  handleName(e) {\r\n    if(this.name !== e.target.value) {\r\n      this.name = e.target.value;\r\n    }\r\n  }\r\n  addChild(type) {\r\n    const data = {\r\n      target : this.node.lastElementChild,\r\n      menu : this.menu,\r\n      author : this.author,\r\n      name : '',\r\n      parent : this,\r\n      view : this.view,\r\n      canvas : this.canvas,\r\n      root : this.root,\r\n      rootItem : this.rootItem,\r\n      type\r\n    }\r\n    const item = new Item(data);\r\n    this.childs.push(item);\r\n    this.drawingLine();\r\n    item.evFocusNameTag();\r\n  }\r\n  evFocusNameTag() {\r\n    this.node.firstElementChild.focus();\r\n  }\r\n  delete() {\r\n    this.childs.forEach(v => {\r\n      v.delete();\r\n    });\r\n    if(this.parent) {\r\n      this.parent.childs = this.parent.childs.filter(v => v !== this);\r\n    }\r\n    this.node.remove();\r\n    this.updatePosition();\r\n    this.drawingLine();\r\n  }\r\n  toObject() {\r\n    return {\r\n      _id: this._id,\r\n      type: this.type,\r\n      author: this.author,\r\n      name : this.name,\r\n      border_color : this.border_color,\r\n      color : this.color,\r\n      bg_color : this.bg_color,\r\n      content : this.content,\r\n      startX : this.startX,\r\n      endX : this.endX,\r\n      y : this.y,\r\n    };\r\n  }\r\n  drawingLine() {\r\n    const rootRect = this.root.getBoundingClientRect();\r\n    const canvas = this.canvas;\r\n    canvas.width = rootRect.width;\r\n    canvas.height = rootRect.height;\r\n    const rootClass = this.updatePosition();\r\n    if(!rootClass) return;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.beginPath();\r\n    const dfs = item => {\r\n      if(!item) return;\r\n      const { endX, y } = item;\r\n      ctx.moveTo(endX - 48, y - 80);\r\n      item.childs.forEach(v => {\r\n        ctx.lineTo(v.startX - 48, v.y - 80);\r\n        ctx.moveTo(endX - 48, y - 80);\r\n      });\r\n      item.childs.forEach(v => {\r\n        dfs(v);\r\n      });\r\n    };\r\n    dfs(rootClass);\r\n    ctx.stroke();\r\n  }\r\n  updatePosition() {\r\n    if(!this.parent) return this;\r\n    const getRootClass = item => {\r\n      if(item.parent === null) return item;\r\n      return getRootClass(item.parent);\r\n    };\r\n    const dfs = item => {\r\n      if(!item) return;\r\n      item.setPosition();\r\n      item.childs.forEach(v => {\r\n        dfs(v);\r\n      });\r\n    };\r\n    const rootClass = getRootClass(this.parent);\r\n    if(!rootClass) return;\r\n    dfs(rootClass);\r\n    return rootClass;\r\n  }\r\n}","import Contextmenu from './src/javascript/contextmenu.js';\r\nimport Contentview from './src/javascript/contentview.js';\r\nimport Item from './src/javascript/item.js';\r\n\r\nconst itemTarget = document.getElementById('itemTarget');\r\nconst searchInput = document.getElementById('searchInput');\r\nconst contentview = document.getElementById('contentview');\r\nconst saveButton = document.getElementById('saveButton');\r\nconst shareButton = document.getElementById('shareButton');\r\nconst titleInput = document.getElementById('titleInput');\r\n\r\nconst init = async () => {\r\n  const contextMenu = new Contextmenu(itemTarget);\r\n  const contentView = new Contentview(contentview);\r\n  const canvas = document.querySelector('.canvas');\r\n\r\n  const treeId = location.pathname.slice(1);\r\n  let item = null;\r\n  let rootNode = null;\r\n  if(treeId.length > 0) {\r\n    const result = await fetch(`/memotree/${treeId}`);\r\n    rootNode = await result.json();\r\n  } else {\r\n    let cache = getData();\r\n    if(!cache) cache = setData();\r\n    rootNode = JSON.parse(cache);\r\n  }\r\n  rootNode.root = itemTarget;\r\n  rootNode.target = itemTarget;\r\n  rootNode.menu = contextMenu;\r\n  rootNode.view = contentView;\r\n  rootNode.canvas = canvas;\r\n  rootNode.rootItem = rootNode;\r\n  if(rootNode.title) {\r\n    titleInput.value = rootNode.title;\r\n  }\r\n  item = new Item(rootNode);\r\n  item.drawingLine();\r\n  const handlePopup = target => {\r\n    if(!target.closest('.popup')) {\r\n      document.querySelectorAll('.popup').forEach(v => v.classList.add('hidden'));\r\n    }\r\n  };\r\n\r\n  const searchItem = target => {\r\n    if(target.value === '') return;\r\n    const list = document.querySelectorAll('.item__tag');\r\n    list.forEach(v => {\r\n      if(v.value.includes(target.value)) {\r\n        v.classList.add('on-search');\r\n      } else {\r\n        v.classList.remove('on-search');\r\n      }\r\n    });\r\n  };\r\n  searchInput.addEventListener('keyup', ({ target }) => searchItem(target));\r\n\r\n  window.addEventListener('click', ({ target }) => handlePopup(target));\r\n  window.addEventListener('contextmenu', ({ target }) => handlePopup(target));\r\n  saveButton.addEventListener('click', () => saveData(item));\r\n  shareButton.addEventListener('click', () => {\r\n    delete item._id;\r\n    saveData(item);\r\n    shareData(getData());\r\n  });\r\n};\r\n\r\nconst getData = () => localStorage.getItem('memotree');\r\nconst setData = () => {\r\n  const defaultData = {\r\n    _id: null,\r\n    type: 'folder',\r\n    author: '*',\r\n    name: '제목 없음',\r\n    parent: null,\r\n    status: 1,\r\n  };\r\n  localStorage.setItem('memotree', JSON.stringify(defaultData));\r\n  return localStorage.getItem('memotree');\r\n};\r\nconst saveData = item => {\r\n  const dfs = item => {\r\n    if(!item) return;\r\n    const result = item.toObject();\r\n    result.childs = item.childs.map(v => dfs(v));\r\n    return result;\r\n  };\r\n  const result = dfs(item);\r\n  result.title = titleInput.value;\r\n  localStorage.setItem('memotree', JSON.stringify(result));\r\n}\r\nconst shareData = async item => {\r\n  const result = await fetch('/memotree', { \r\n    method: 'POST', \r\n    body: item, \r\n    headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' } \r\n  });\r\n  const id = await result.json();\r\n  alert('새로운 주소가 생성되었습니다!');\r\n  location.href = location.origin + '/' + id;\r\n}\r\n\r\ninit();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}